# Alert System Architecture & Flow Diagrams

## System Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ALERT SYSTEM ARCHITECTURE                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          DATA COLLECTION LAYER                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  API Connectors â”‚  â”‚ WebSocket Feedsâ”‚  â”‚ System Metrics (psutil)    â”‚   â”‚
â”‚  â”‚                â”‚  â”‚                â”‚  â”‚ - Disk, Memory, CPU, DB   â”‚   â”‚
â”‚  â”‚ - Binance      â”‚  â”‚ - Exchange     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”‚ - CoinGecko    â”‚  â”‚   streams      â”‚                                     â”‚
â”‚  â”‚ - CryptoCompareâ”‚  â”‚ - Real-time    â”‚                                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   prices       â”‚                                     â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DATABASE LAYER (PostgreSQL)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  API Data       â”‚  â”‚  Price History   â”‚  â”‚ Alert Rules        â”‚         â”‚
â”‚  â”‚  & WebSocket    â”‚  â”‚  (for volatility)â”‚  â”‚ (Configuration)    â”‚         â”‚
â”‚  â”‚  Messages       â”‚  â”‚                  â”‚  â”‚                    â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Alert Logs     â”‚  â”‚  Alert Tracking  â”‚  â”‚ Notification Queue â”‚         â”‚
â”‚  â”‚  (History)      â”‚  â”‚  (Cooldown/Limit)â”‚  â”‚ (With Retries)     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ALERT PROCESSING LAYER                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚               ALERT SCHEDULER (APScheduler)                    â”‚         â”‚
â”‚  â”‚          Runs: Every 1 minute (configurable)                   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                            â”‚                                                 â”‚
â”‚                            â–¼                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚           ALERT MANAGER (AlertManager)                       â”‚            â”‚
â”‚  â”‚  - Load enabled rules from DB                                â”‚            â”‚
â”‚  â”‚  - Check cooldown/daily limits                               â”‚            â”‚
â”‚  â”‚  - Evaluate each rule condition                              â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                            â”‚                                                 â”‚
â”‚                            â–¼                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚      ALERT CONDITION EVALUATOR (AlertConditionEvaluator)    â”‚            â”‚
â”‚  â”‚                                                              â”‚            â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚            â”‚
â”‚  â”‚  â”‚ Price Check  â”‚ â”‚ Volatility   â”‚ â”‚ Data Missing â”‚        â”‚            â”‚
â”‚  â”‚  â”‚              â”‚ â”‚ Check        â”‚ â”‚ Check        â”‚        â”‚            â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚            â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚            â”‚
â”‚  â”‚  â”‚ System Healthâ”‚                                           â”‚            â”‚
â”‚  â”‚  â”‚ Check        â”‚                                           â”‚            â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                            â”‚                                                 â”‚
â”‚                    Condition Met? â”€â”€â†’ TRIGGER ALERT                         â”‚
â”‚                            â”‚                                                 â”‚
â”‚                            â–¼                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚      ALERT LOGGER (creates alert_logs record)               â”‚            â”‚
â”‚  â”‚      - Store alert details                                  â”‚            â”‚
â”‚  â”‚      - Record metadata                                      â”‚            â”‚
â”‚  â”‚      - Update tracking (cooldown, daily count)              â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                            â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     NOTIFICATION LAYER (AsyncIO)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚          NOTIFICATION SERVICE (NotificationService)          â”‚           â”‚
â”‚  â”‚           - Route to configured channels                     â”‚           â”‚
â”‚  â”‚           - Queue notifications in notification_queue        â”‚           â”‚
â”‚  â”‚           - Log attempts for retries                         â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                            â”‚                                                 â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚            â–¼               â–¼               â–¼                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ Email        â”‚  â”‚ Slack        â”‚  â”‚ Both Channels  â”‚                   â”‚
â”‚  â”‚ Notifier     â”‚  â”‚ Notifier     â”‚  â”‚                â”‚                   â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚ (Email + Slack)â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚         â”‚                 â”‚                    â”‚                            â”‚
â”‚         â–¼                 â–¼                    â–¼                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ SMTP Server  â”‚  â”‚ Slack Webhookâ”‚  â”‚ Both Channels  â”‚                   â”‚
â”‚  â”‚ (Gmail, etc) â”‚  â”‚              â”‚  â”‚                â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚         â”‚                 â”‚                    â”‚                            â”‚
â”‚         â–¼                 â–¼                    â–¼                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ ğŸ“§ Email     â”‚  â”‚ ğŸ’¬ Slack Msg â”‚  â”‚ ğŸ“§ + ğŸ’¬        â”‚                   â”‚
â”‚  â”‚ Recipient    â”‚  â”‚ in Channel   â”‚  â”‚                â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚          RETRY MECHANISM (on failure)                        â”‚           â”‚
â”‚  â”‚  - Max 3 retries per notification                            â”‚           â”‚
â”‚  â”‚  - Logged in notification_queue table                        â”‚           â”‚
â”‚  â”‚  - Manual review of failed notifications                     â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        API LAYER (FastAPI Routes)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  /api/alerts/rules          - CRUD operations on alert rules                 â”‚
â”‚  /api/alerts/logs           - View alert history                            â”‚
â”‚  /api/alerts/dashboard      - Dashboard metrics                             â”‚
â”‚  /api/alerts/stats          - Alert statistics                              â”‚
â”‚  /api/alerts/check          - Manual alert check                            â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚              FRONTEND (React/Vue)                         â”‚              â”‚
â”‚  â”‚                                                           â”‚              â”‚
â”‚  â”‚  - Alert Management Dashboard                            â”‚              â”‚
â”‚  â”‚  - Rule Creation/Editing                                 â”‚              â”‚
â”‚  â”‚  - Alert History Viewer                                  â”‚              â”‚
â”‚  â”‚  - Statistics & Charts                                   â”‚              â”‚
â”‚  â”‚  - Real-time Updates (WebSocket)                         â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Alert Evaluation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ALERT EVALUATION FLOW (Runs every 1 minute)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

START
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Load all enabled alert rules        â”‚
â”‚ from database (alert_rules table)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ For each rule:                      â”‚
â”‚                                     â”‚
â”‚ 1. Check cooldown period            â”‚
â”‚    â””â”€ Is rule in cooldown?          â”‚
â”‚       â””â”€ YES? Skip, continue next   â”‚
â”‚       â””â”€ NO?  Continue              â”‚
â”‚                                     â”‚
â”‚ 2. Check daily limit                â”‚
â”‚    â””â”€ Alerts today < max_per_day?   â”‚
â”‚       â””â”€ NO? Skip, continue next    â”‚
â”‚       â””â”€ YES? Continue              â”‚
â”‚                                     â”‚
â”‚ 3. Evaluate rule condition:         â”‚
â”‚    â”œâ”€ Type: PRICE_THRESHOLD         â”‚
â”‚    â”‚  â””â”€ Get current price          â”‚
â”‚    â”‚  â””â”€ Compare with threshold     â”‚
â”‚    â”‚  â””â”€ Return: triggered, message â”‚
â”‚    â”‚                                â”‚
â”‚    â”œâ”€ Type: VOLATILITY              â”‚
â”‚    â”‚  â””â”€ Get price history (window) â”‚
â”‚    â”‚  â””â”€ Calculate % change         â”‚
â”‚    â”‚  â””â”€ Compare with threshold     â”‚
â”‚    â”‚  â””â”€ Return: triggered, message â”‚
â”‚    â”‚                                â”‚
â”‚    â”œâ”€ Type: DATA_MISSING            â”‚
â”‚    â”‚  â””â”€ Get last data timestamp    â”‚
â”‚    â”‚  â””â”€ Check vs current time      â”‚
â”‚    â”‚  â””â”€ Return: triggered, message â”‚
â”‚    â”‚                                â”‚
â”‚    â””â”€ Type: SYSTEM_HEALTH           â”‚
â”‚       â””â”€ Run health check           â”‚
â”‚       â”‚  â”œâ”€ DB Connection check     â”‚
â”‚       â”‚  â”œâ”€ Disk space check        â”‚
â”‚       â”‚  â”œâ”€ Memory usage check      â”‚
â”‚       â”‚  â””â”€ CPU usage check         â”‚
â”‚       â””â”€ Return: triggered, message â”‚
â”‚                                     â”‚
â”‚ 4. If triggered:                    â”‚
â”‚    â”œâ”€ Create alert_logs entry       â”‚
â”‚    â”œâ”€ Update alert_tracking         â”‚
â”‚    â”‚  (set cooldown, increase count)â”‚
â”‚    â””â”€ Continue to notifications    â”‚
â”‚                                     â”‚
â”‚ 5. If NOT triggered:                â”‚
â”‚    â””â”€ Skip to next rule             â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â”œâ”€ (for each triggered alert)
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SEND NOTIFICATIONS                  â”‚
â”‚                                     â”‚
â”‚ Get notification config:            â”‚
â”‚ - Channel (email, slack, both)      â”‚
â”‚ - Recipients (email addresses)      â”‚
â”‚ - Webhook URL (Slack)               â”‚
â”‚                                     â”‚
â”‚ Route to:                           â”‚
â”‚ â”œâ”€ Email Notifier                   â”‚
â”‚ â”œâ”€ Slack Notifier                   â”‚
â”‚ â””â”€ Both (parallel)                  â”‚
â”‚                                     â”‚
â”‚ Queue in notification_queue table   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SEND EMAIL (if configured)          â”‚
â”‚                                     â”‚
â”‚ â”œâ”€ Connect to SMTP server           â”‚
â”‚ â”œâ”€ Format HTML email                â”‚
â”‚ â”œâ”€ Send to recipients               â”‚
â”‚ â””â”€ Log result (sent/failed)         â”‚
â”‚    â””â”€ If failed: queue for retry    â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SEND SLACK (if configured)          â”‚
â”‚                                     â”‚
â”‚ â”œâ”€ Format Slack message             â”‚
â”‚ â”‚  â”œâ”€ Title                         â”‚
â”‚ â”‚  â”œâ”€ Message                       â”‚
â”‚ â”‚  â”œâ”€ Severity (color)              â”‚
â”‚ â”‚  â””â”€ Metadata fields               â”‚
â”‚ â”‚                                  â”‚
â”‚ â”œâ”€ POST to webhook URL              â”‚
â”‚ â””â”€ Log result (sent/failed)         â”‚
â”‚    â””â”€ If failed: queue for retry    â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UPDATE ALERT STATUS                 â”‚
â”‚                                     â”‚
â”‚ â”œâ”€ Set status = 'sent'              â”‚
â”‚ â”œâ”€ Set sent_at = NOW()              â”‚
â”‚ â””â”€ If notification failed:          â”‚
â”‚    â””â”€ Keep status = 'pending'       â”‚
â”‚       for retry by retry handler    â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Continue next rule                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â–¼
ALL RULES PROCESSED? NO â”€â”€â”€â”€ (go back to "For each rule")
  â”‚
  YES
  â”‚
  â–¼
END (next check in 1 minute)
```

## Alert Type Conditions

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ALERT TYPE CONDITIONS                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. PRICE THRESHOLD ALERT
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Condition: current_price [comparison] threshold_price    â”‚
   â”‚                                                          â”‚
   â”‚ Comparisons:                                             â”‚
   â”‚ â”œâ”€ GREATER: current_price > threshold_price             â”‚
   â”‚ â”‚  Example: BTC > $50,000                               â”‚
   â”‚ â”‚  Use: Alert on price surge                            â”‚
   â”‚ â”‚                                                        â”‚
   â”‚ â”œâ”€ LESS: current_price < threshold_price               â”‚
   â”‚ â”‚  Example: ETH < $2,000                                â”‚
   â”‚ â”‚  Use: Alert on price crash                            â”‚
   â”‚ â”‚                                                        â”‚
   â”‚ â””â”€ EQUAL: current_price == threshold_price              â”‚
   â”‚    Example: BTC == $50,000                              â”‚
   â”‚    Use: Alert on exact price (rare)                     â”‚
   â”‚                                                          â”‚
   â”‚ Metadata:                                                â”‚
   â”‚ â”œâ”€ current_price: Current market price                  â”‚
   â”‚ â”œâ”€ threshold: Configured threshold                      â”‚
   â”‚ â””â”€ timestamp: When alert was triggered                  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2. VOLATILITY ALERT
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Condition: |price_change| > volatility_percentage        â”‚
   â”‚ Over: volatility_duration_minutes                        â”‚
   â”‚                                                          â”‚
   â”‚ Calculation:                                             â”‚
   â”‚ 1. Get oldest price in time window:                      â”‚
   â”‚    SELECT price FROM price_history                       â”‚
   â”‚    WHERE timestamp >= (NOW - duration_minutes)           â”‚
   â”‚    ORDER BY timestamp ASC                               â”‚
   â”‚    LIMIT 1                                               â”‚
   â”‚                                                          â”‚
   â”‚ 2. Get newest price in time window:                      â”‚
   â”‚    SELECT price FROM price_history                       â”‚
   â”‚    WHERE timestamp >= (NOW - duration_minutes)           â”‚
   â”‚    ORDER BY timestamp DESC                              â”‚
   â”‚    LIMIT 1                                               â”‚
   â”‚                                                          â”‚
   â”‚ 3. Calculate change:                                     â”‚
   â”‚    change = (new_price - old_price) / old_price * 100  â”‚
   â”‚    if change < 0:                                        â”‚
   â”‚        change = abs(change)                              â”‚
   â”‚                                                          â”‚
   â”‚ 4. Compare:                                              â”‚
   â”‚    if change > volatility_percentage:                    â”‚
   â”‚        TRIGGER ALERT                                    â”‚
   â”‚                                                          â”‚
   â”‚ Example:                                                 â”‚
   â”‚ â”œâ”€ Old price (10 min ago): $100                         â”‚
   â”‚ â”œâ”€ New price (now): $105                                â”‚
   â”‚ â”œâ”€ Change: 5%                                            â”‚
   â”‚ â”œâ”€ Threshold: 5%                                         â”‚
   â”‚ â””â”€ Alert: YES (5% >= 5%)                                â”‚
   â”‚                                                          â”‚
   â”‚ Metadata:                                                â”‚
   â”‚ â”œâ”€ change_percent: Actual change                        â”‚
   â”‚ â”œâ”€ old_price: Price at window start                     â”‚
   â”‚ â”œâ”€ new_price: Current price                             â”‚
   â”‚ â”œâ”€ duration_minutes: Time window                        â”‚
   â”‚ â””â”€ threshold: Configured threshold                      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. DATA MISSING ALERT
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Condition: (NOW - last_data_timestamp) > missing_minutes â”‚
   â”‚                                                          â”‚
   â”‚ Check:                                                   â”‚
   â”‚ 1. Query api_connector_data:                             â”‚
   â”‚    SELECT MAX(timestamp) FROM api_connector_data         â”‚
   â”‚    WHERE connector_id = 'binance_prices'                â”‚
   â”‚                                                          â”‚
   â”‚ 2. Calculate time difference:                            â”‚
   â”‚    last_data = QUERY RESULT                              â”‚
   â”‚    time_diff = NOW - last_data                           â”‚
   â”‚                                                          â”‚
   â”‚ 3. Compare:                                              â”‚
   â”‚    if time_diff > missing_minutes:                       â”‚
   â”‚        TRIGGER ALERT                                    â”‚
   â”‚                                                          â”‚
   â”‚ Example:                                                 â”‚
   â”‚ â”œâ”€ Last data: 10:35:00                                  â”‚
   â”‚ â”œâ”€ Current time: 10:41:00                               â”‚
   â”‚ â”œâ”€ Difference: 6 minutes                                â”‚
   â”‚ â”œâ”€ Threshold: 5 minutes                                 â”‚
   â”‚ â””â”€ Alert: YES (6 > 5)                                   â”‚
   â”‚                                                          â”‚
   â”‚ Metadata:                                                â”‚
   â”‚ â”œâ”€ last_data_timestamp: Last received data              â”‚
   â”‚ â”œâ”€ time_missing_minutes: How long without data          â”‚
   â”‚ â”œâ”€ api_endpoint: Which API is down                      â”‚
   â”‚ â””â”€ threshold: Configured threshold                      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

4. SYSTEM HEALTH ALERT
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Types:                                                   â”‚
   â”‚                                                          â”‚
   â”‚ A. DISK SPACE                                            â”‚
   â”‚    Condition: available_disk_gb < threshold_gb           â”‚
   â”‚    Check: psutil.disk_usage('/')                         â”‚
   â”‚    Example: Alert if < 5 GB available                    â”‚
   â”‚    Metadata:                                             â”‚
   â”‚    â”œâ”€ available_gb: Free disk space                      â”‚
   â”‚    â”œâ”€ used_percent: % used                              â”‚
   â”‚    â”œâ”€ total_gb: Total disk size                         â”‚
   â”‚    â””â”€ threshold: Configured threshold                   â”‚
   â”‚                                                          â”‚
   â”‚ B. MEMORY USAGE                                          â”‚
   â”‚    Condition: memory_used_percent > threshold_percent    â”‚
   â”‚    Check: psutil.virtual_memory()                        â”‚
   â”‚    Example: Alert if > 85% used                         â”‚
   â”‚    Metadata:                                             â”‚
   â”‚    â”œâ”€ used_percent: % of memory used                    â”‚
   â”‚    â”œâ”€ available_gb: Free memory available               â”‚
   â”‚    â”œâ”€ total_gb: Total system memory                     â”‚
   â”‚    â””â”€ threshold: Configured threshold                   â”‚
   â”‚                                                          â”‚
   â”‚ C. CPU USAGE                                             â”‚
   â”‚    Condition: cpu_percent > threshold_percent            â”‚
   â”‚    Check: psutil.cpu_percent(interval=1)                â”‚
   â”‚    Example: Alert if > 90% used                         â”‚
   â”‚    Metadata:                                             â”‚
   â”‚    â”œâ”€ cpu_percent: % CPU being used                     â”‚
   â”‚    â”œâ”€ core_count: Number of CPU cores                   â”‚
   â”‚    â””â”€ threshold: Configured threshold                   â”‚
   â”‚                                                          â”‚
   â”‚ D. DATABASE CONNECTION                                   â”‚
   â”‚    Condition: connection_failed == True                  â”‚
   â”‚    Check: SELECT 1 FROM db (test query)                 â”‚
   â”‚    Example: Alert if DB unreachable                     â”‚
   â”‚    Metadata:                                             â”‚
   â”‚    â”œâ”€ status: 'healthy' or 'unhealthy'                 â”‚
   â”‚    â”œâ”€ error: Error message if unhealthy                â”‚
   â”‚    â””â”€ timestamp: When check was performed               â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Notification Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            NOTIFICATION DELIVERY FLOW                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ALERT TRIGGERED (alert_logs entry created)
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NOTIFICATION SERVICE:          â”‚
â”‚ send_alert()                   â”‚
â”‚                                â”‚
â”‚ Input:                         â”‚
â”‚ - alert_id (int)               â”‚
â”‚ - rule (dict)                  â”‚
â”‚ - title (str)                  â”‚
â”‚ - message (str)                â”‚
â”‚ - severity (str)               â”‚
â”‚ - metadata (dict)              â”‚
â”‚                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Parse notification channels:   â”‚
â”‚                                â”‚
â”‚ Channels = rule.notification   â”‚
â”‚           _channels            â”‚
â”‚                                â”‚
â”‚ â”œâ”€ "email"                     â”‚
â”‚ â”œâ”€ "slack"                     â”‚
â”‚ â”œâ”€ "both"                      â”‚
â”‚ â””â”€ "none"                      â”‚
â”‚                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â”œâ”€ (if email or both)
  â”‚  â”‚
  â”‚  â–¼
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  â”‚ EMAIL NOTIFIER:            â”‚
  â”‚  â”‚                            â”‚
  â”‚  â”‚ 1. Get recipients:         â”‚
  â”‚  â”‚    email_recipients from   â”‚
  â”‚  â”‚    rule (split by comma)   â”‚
  â”‚  â”‚                            â”‚
  â”‚  â”‚ 2. Format email:           â”‚
  â”‚  â”‚    - HTML template         â”‚
  â”‚  â”‚    - Title in color        â”‚
  â”‚  â”‚    - Message               â”‚
  â”‚  â”‚    - Metadata fields       â”‚
  â”‚  â”‚    - Timestamp             â”‚
  â”‚  â”‚    - Severity badge        â”‚
  â”‚  â”‚                            â”‚
  â”‚  â”‚ 3. Connect to SMTP:        â”‚
  â”‚  â”‚    - Server: SMTP_SERVER   â”‚
  â”‚  â”‚    - Port: SMTP_PORT       â”‚
  â”‚  â”‚    - TLS: SMTP_USE_TLS     â”‚
  â”‚  â”‚    - Auth: sender creds    â”‚
  â”‚  â”‚                            â”‚
  â”‚  â”‚ 4. Send message:           â”‚
  â”‚  â”‚    - From: SENDER_EMAIL    â”‚
  â”‚  â”‚    - To: recipients        â”‚
  â”‚  â”‚    - Subject: [SEVERITY]   â”‚
  â”‚  â”‚    - Body: HTML content    â”‚
  â”‚  â”‚                            â”‚
  â”‚  â”‚ 5. Log result:             â”‚
  â”‚  â”‚    - Insert notification   â”‚
  â”‚  â”‚    - queue entry           â”‚
  â”‚  â”‚    - Status: sent/failed   â”‚
  â”‚  â”‚    - Error: error msg      â”‚
  â”‚  â”‚                            â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚     â”‚
  â”‚     â–¼
  â”‚  âœ“ EMAIL SENT â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚     â”‚                 â”‚
  â”‚     â””â”€â–º results['    â”‚
  â”‚         email_sent']  â”‚
  â”‚         = True        â”‚
  â”‚
  â”œâ”€ (if slack or both)
  â”‚  â”‚
  â”‚  â–¼
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  â”‚ SLACK NOTIFIER:            â”‚
  â”‚  â”‚                            â”‚
  â”‚  â”‚ 1. Get webhook URL:        â”‚
  â”‚  â”‚    slack_webhook_url from  â”‚
  â”‚  â”‚    rule                    â”‚
  â”‚  â”‚                            â”‚
  â”‚  â”‚ 2. Build payload:          â”‚
  â”‚  â”‚    - Attachment with:      â”‚
  â”‚  â”‚      â€¢ Title               â”‚
  â”‚  â”‚      â€¢ Message             â”‚
  â”‚  â”‚      â€¢ Color (by severity) â”‚
  â”‚  â”‚      â€¢ Fields (metadata)   â”‚
  â”‚  â”‚      â€¢ Footer              â”‚
  â”‚  â”‚      â€¢ Timestamp           â”‚
  â”‚  â”‚                            â”‚
  â”‚  â”‚ 3. POST to webhook:        â”‚
  â”‚  â”‚    - URL: webhook_url      â”‚
  â”‚  â”‚    - Method: POST          â”‚
  â”‚  â”‚    - Content-Type: JSON    â”‚
  â”‚  â”‚    - Timeout: 10 seconds   â”‚
  â”‚  â”‚                            â”‚
  â”‚  â”‚ 4. Handle response:        â”‚
  â”‚  â”‚    - 200 OK: success       â”‚
  â”‚  â”‚    - Other: failure        â”‚
  â”‚  â”‚                            â”‚
  â”‚  â”‚ 5. Log result:             â”‚
  â”‚  â”‚    - Insert notification   â”‚
  â”‚  â”‚    - queue entry           â”‚
  â”‚  â”‚    - Status: sent/failed   â”‚
  â”‚  â”‚    - Error: error msg      â”‚
  â”‚  â”‚                            â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚     â”‚
  â”‚     â–¼
  â”‚  âœ“ SLACK SENT â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚     â”‚                 â”‚
  â”‚     â””â”€â–º results['    â”‚
  â”‚         slack_sent']  â”‚
  â”‚         = True        â”‚
  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                               â”‚
                                               â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚ UPDATE ALERT LOG:    â”‚
                                    â”‚                      â”‚
                                    â”‚ UPDATE alert_logs    â”‚
                                    â”‚ SET:                 â”‚
                                    â”‚ - status = 'sent'    â”‚
                                    â”‚ - sent_at = NOW()    â”‚
                                    â”‚                      â”‚
                                    â”‚ WHERE id = alert_id  â”‚
                                    â”‚                      â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                                               â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚ RETURN RESULTS:      â”‚
                                    â”‚                      â”‚
                                    â”‚ {                    â”‚
                                    â”‚  alert_id: int,      â”‚
                                    â”‚  email_sent: bool,   â”‚
                                    â”‚  slack_sent: bool,   â”‚
                                    â”‚  errors: [...]       â”‚
                                    â”‚ }                    â”‚
                                    â”‚                      â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                                               â–¼
                                              END
```

## Database Schema Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ALERT SYSTEM DATABASE RELATIONSHIPS                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚  alert_rules    â”‚
                     â”‚                 â”‚
                     â”‚  - id (PK)      â”‚
                     â”‚  - name         â”‚
                     â”‚  - alert_type   â”‚
                     â”‚  - enabled      â”‚
                     â”‚  - symbol       â”‚
                     â”‚  - ...params    â”‚
                     â”‚  - created_at   â”‚
                     â”‚  - updated_at   â”‚
                     â”‚                 â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                   (1 rule can have many alerts)
                              â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                                     â”‚
           â–¼                                     â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  alert_logs     â”‚                â”‚ alert_tracking  â”‚
    â”‚                 â”‚                â”‚                 â”‚
    â”‚  - id (PK)      â”‚                â”‚  - id (PK)      â”‚
    â”‚  - rule_id (FK) â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  - rule_id (FK) â”‚
    â”‚  - alert_type   â”‚    (1:1)       â”‚  - last_alert   â”‚
    â”‚  - title        â”‚                â”‚    _time        â”‚
    â”‚  - message      â”‚                â”‚  - alert_count  â”‚
    â”‚  - severity     â”‚                â”‚    _today       â”‚
    â”‚  - status       â”‚                â”‚  - last_alert   â”‚
    â”‚  - metadata     â”‚                â”‚    _date        â”‚
    â”‚  - created_at   â”‚                â”‚                 â”‚
    â”‚  - sent_at      â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚  - acknowledged â”‚
    â”‚    _at          â”‚
    â”‚                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
  (1 alert has many notifications)
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚notification_    â”‚
    â”‚  queue          â”‚
    â”‚                 â”‚
    â”‚  - id (PK)      â”‚
    â”‚  - alert_id(FK) â”‚
    â”‚  - channel      â”‚
    â”‚  - recipient    â”‚
    â”‚  - status       â”‚
    â”‚  - retry_count  â”‚
    â”‚  - max_retries  â”‚
    â”‚  - error_msg    â”‚
    â”‚  - created_at   â”‚
    â”‚  - last_retry   â”‚
    â”‚  - sent_at      â”‚
    â”‚                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Supporting Data Tables                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ price_history                              â”‚   â”‚
â”‚  â”‚ (for volatility calculations)              â”‚   â”‚
â”‚  â”‚                                            â”‚   â”‚
â”‚  â”‚  - id                                      â”‚   â”‚
â”‚  â”‚  - symbol (BTC, ETH, etc)                 â”‚   â”‚
â”‚  â”‚  - price                                  â”‚   â”‚
â”‚  â”‚  - source (API, WebSocket)                â”‚   â”‚
â”‚  â”‚  - timestamp                              â”‚   â”‚
â”‚  â”‚                                            â”‚   â”‚
â”‚  â”‚  Indexed:                                  â”‚   â”‚
â”‚  â”‚  (symbol, timestamp DESC)                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚  Used by:                                          â”‚
â”‚  - Volatility alert checks                        â”‚
â”‚  - Price history queries                          â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

This architecture ensures:
- **Scalability**: Connection pooling, indexed queries
- **Reliability**: Retry mechanism, error logging
- **Flexibility**: Pluggable notification channels
- **Auditability**: Complete alert history
- **Performance**: Optimized queries with proper indexes
